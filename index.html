<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± ØªÙŠÙƒ ØªÙˆÙƒ ÙˆÙ‡Ù…ÙŠ</title>
<style>
  :root{
    --bg:#000;
    --muted: rgba(255,255,255,0.9);
    --bubble: rgba(0,0,0,0.45);
    --accent: #ff3366;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);font-family:Arial,Helvetica,sans-serif;color:#fff;overflow:hidden}
  video#cam{position:fixed;inset:0;width:100%;height:100%;object-fit:cover;z-index:0;transform:scaleX(-1)}

  .overlay{position:fixed;inset:0;z-index:2;pointer-events:none}

  .pill{background:linear-gradient(180deg,rgba(0,0,0,0.5),rgba(0,0,0,0.35));padding:8px 12px;border-radius:20px;font-weight:700;font-size:14px;color:#fff;backdrop-filter:blur(4px)}
  .top-left{position:absolute;top:10px;left:10px;display:flex;gap:8px;align-items:center;z-index:6}
  .top-right-total{position:absolute;top:10px;right:10px;display:flex;gap:8px;align-items:center;z-index:6}

  .right-column{position:absolute;right:10px;top:18%;display:flex;flex-direction:column;gap:12px;align-items:center;z-index:6}
  .like-box{width:56px;height:56px;border-radius:14px;background:rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;flex-direction:column;border:1px solid rgba(255,255,255,0.06)}
  .like-box .count{font-size:12px;opacity:0.95}
  .float-zone{position:relative;width:64px;height:320px;display:flex;align-items:flex-end;justify-content:center}
  .floating-heart{position:absolute;bottom:6px;right:6px;font-size:20px;animation:rise 2600ms linear forwards}
  @keyframes rise{0%{transform:translateY(0) scale(1);opacity:1}30%{transform:translateY(-80px) scale(1.08)}100%{transform:translateY(-320px) scale(.6);opacity:0}}

  /* ===== Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø£Ø³ÙÙ„ Ø§Ù„Ø´Ø§Ø´Ø© ÙÙ‚Ø· ===== */
  .comments-bar{
    position:absolute;
    left:0;right:0;
    bottom:3.5vh;
    display:flex;
    justify-content:center;
    pointer-events:none;
    z-index:6;
  }
  .comments-wrap{
    width:94%;
    max-width:720px;
    display:flex;
    flex-direction:column;
    justify-content:flex-end;
    gap:4px;
    align-items:flex-start;
    max-height:28vh; /* Ù…Ø³Ø§Ø­Ø© Ù…Ø­Ø¯ÙˆØ¯Ø© Ø£Ø³ÙÙ„ */
    overflow:hidden;
  }
  .comment{
    pointer-events:auto;
    background:linear-gradient(90deg,rgba(0,0,0,0.55),rgba(0,0,0,0.45));
    padding:6px 10px;
    border-radius:999px;
    display:flex;
    gap:8px;
    align-items:center;
    max-width:100%;
    color:#fff;
    font-size:15px;
    opacity:0;
    animation:fadeIn .4s ease forwards;
  }
  @keyframes fadeIn{to{opacity:1}}
  .avatar{
    width:32px;height:32px;border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    color:#111;font-weight:700;flex-shrink:0;
    background:linear-gradient(120deg,#ffd1dc,#ff9aa2);
    box-shadow:0 3px 12px rgba(0,0,0,0.3);
    font-size:13px;
  }
  .msg-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:70%}

  /* Ù‡Ø¯ÙŠØ© */
  .head-gift{position:absolute;top:14%;left:50%;transform:translateX(-50%) translateY(-60%);z-index:8;font-size:70px;pointer-events:none;filter:drop-shadow(0 12px 24px rgba(0,0,0,0.45));opacity:0;animation:popGift .9s ease forwards}
  @keyframes popGift{0%{transform:translateX(-50%) translateY(-60%) scale(.2);opacity:0}30%{transform:translateX(-50%) translateY(-66%) scale(1.12);opacity:1}60%{transform:translateX(-50%) translateY(-72%) scale(.95);opacity:1}100%{transform:translateX(-50%) translateY(-120%) scale(.6);opacity:0}}

  #toggleCommentsBtn{
    position:absolute;bottom:14px;left:50%;transform:translateX(-50%);
    z-index:999;
    padding:10px 18px;
    font-size:15px;
    border:none;border-radius:999px;
    background:linear-gradient(90deg,#ff3366,#ff6699);
    color:#fff;font-weight:bold;
    cursor:pointer;
    box-shadow:0 0 10px rgba(0,0,0,0.3);
  }
  #toggleCommentsBtn.off{background:linear-gradient(90deg,#555,#777);}
</style>
</head>
<body>

<video id="cam" autoplay playsinline muted></video>

<div class="overlay">
  <div class="top-left">
    <div class="pill">Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±</div>
    <div class="pill">ğŸ‘ï¸ <span id="viewerCount">2.0k</span></div>
  </div>

  <div class="top-right-total">
    <div class="pill">â¤ï¸ <span id="totalLikesCount">50.0k</span></div>
  </div>

  <div class="right-column">
    <div class="float-zone" id="floatZone"></div>
    <div class="like-box">
      <div style="font-size:18px">â¤ï¸</div>
      <div class="count" id="likeCount">50k</div>
    </div>
  </div>

  <div class="comments-bar">
    <div class="comments-wrap" id="commentsWrap"></div>
  </div>

  <div id="headGiftArea"></div>
</div>

<button id="toggleCommentsBtn">ğŸŸ¢ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø´ØºØ§Ù„Ø©</button>

<script>
function formatTikTokNumber(n){
  if(n >= 1_000_000_000) return (n/1_000_000_000).toFixed(1).replace(/\.0$/,'')+'B';
  if(n >= 1_000_000) return (n/1_000_000).toFixed(1).replace(/\.0$/,'')+'M';
  if(n >= 1_000) return (n/1_000).toFixed(1).replace(/\.0$/,'')+'k';
  return String(n);
}

/* ÙƒØ§Ù…ÙŠØ±Ø§ */
const video=document.getElementById('cam');
navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:false})
.then(s=>video.srcObject=s).catch(()=>{});

/* Ù…Ø´Ø§Ù‡Ø¯Ø§Øª */
let viewers=2000;
const viewerCountEl=document.getElementById('viewerCount');
function updateViewers(){
  let delta=Math.floor((Math.random()-0.5)*1800);
  if(Math.random()<0.08) delta+=Math.floor(500+Math.random()*80000);
  viewers=Math.max(200,Math.min(5_000_000_000,viewers+delta));
  viewerCountEl.textContent=formatTikTokNumber(viewers);
}
setInterval(updateViewers,1400);

/* Ù„Ø§ÙŠÙƒØ§Øª */
let likes=50000;
const likeCountEl=document.getElementById('likeCount');
const totalLikesEl=document.getElementById('totalLikesCount');
function incLikes(n=1){
  likes+=Math.round(n);
  likeCountEl.textContent=formatTikTokNumber(likes);
  totalLikesEl.textContent=formatTikTokNumber(likes);
}
setInterval(()=>{
  incLikes(100+Math.floor(Math.random()*800));
  spawnFloatingHeart();
},400+Math.random()*500);

/* Ù‚Ù„ÙˆØ¨ */
const floatZone=document.getElementById('floatZone');
function spawnFloatingHeart(){
  const el=document.createElement('div');
  el.className='floating-heart';
  const size=16+Math.random()*26;
  el.style.fontSize=size+'px';
  el.textContent=Math.random()<0.65?'â¤':'ğŸ’–';
  floatZone.appendChild(el);
  setTimeout(()=>el.remove(),2800);
}

/* ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø£Ø³ÙÙ„ */
const commentsWrap=document.getElementById('commentsWrap');
const names=["Ø¯Ù†ÙŠØ§","Ø¹Ù„ÙŠ","Ø³Ø§Ø±Ø©","Ù…Ø­Ù…ÙˆØ¯","Ù†ÙˆØ±Ø§","Ø®Ø§Ù„Ø¯","Ø­Ø³Ù†","Ù„ÙŠÙ„Ù‰","ÙŠÙˆØ³Ù","Ø£Ø­Ù…Ø¯","Ù…Ù†Ø©","Ù‡Ø§Ø¬Ø±","Ø¹Ù…Ø±"];
const msgs=["Ù…Ù†ÙˆØ± ÙŠØ§ Ø§Ø®ÙˆÙŠØ§ ğŸ”¥","Ø§Ø®ÙˆÙŠØ§ Ø§Ù„ØºØ§Ù„ÙŠ â¤ï¸","Ø¹Ø§Ù…Ù„ Ø§ÙŠÙ‡ ÙŠØ§ Ù†Ø¬Ù… ğŸ˜","Ø§Ø³ØªÙ…Ø± ÙŠØ§ ÙˆØ­Ø´ ğŸ’ª","Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙƒ â¤ï¸","Ø¶Ø­ÙƒØªÙƒ Ø­Ù„ÙˆØ© ğŸ˜‚","Ù‚Ù„Ø¨ ÙƒØ¨ÙŠØ± Ù…Ù†Ùƒ â¤ï¸","Ù…ÙÙŠØ´ Ø²ÙŠÙƒ ğŸ‘‘","Ø¬Ø§Ù…Ø¯ Ø£ÙˆÙŠ ğŸ”¥","ØªØ­ÙØ© ÙˆØ§Ù„Ù„Ù‡ ğŸ˜","ÙÙŠÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯ØŸ","Ù†ÙˆØ±ØªÙ†Ø§","Ø­Ù„Ùˆ Ø§Ù„Ø¨Ø«","Ø¹Ø§ÙŠØ² Ø´ØºÙ„Ùƒ"];

let commentsOn=true;

function addComment(name,text){
  if(!commentsOn) return;
  const row=document.createElement('div');
  row.className='comment';
  const ava=document.createElement('div');ava.className='avatar';ava.textContent=name[0];
  const txt=document.createElement('div');txt.className='msg-text';txt.textContent=`${name}: ${text}`;
  row.appendChild(ava);row.appendChild(txt);
  commentsWrap.appendChild(row);
  if(commentsWrap.children.length>5){commentsWrap.removeChild(commentsWrap.firstChild);}
  setTimeout(()=>{row.style.opacity='0';setTimeout(()=>row.remove(),400);},5000+Math.random()*4000);
}

setInterval(()=>{
  if(commentsOn && Math.random()<0.9){
    const n=names[Math.floor(Math.random()*names.length)];
    const m=msgs[Math.floor(Math.random()*msgs.length)];
    addComment(n,m);
    viewers+=Math.floor(Math.random()*8);
    viewerCountEl.textContent=formatTikTokNumber(viewers);
  }
},1000+Math.random()*900);

/* Ù‡Ø¯ÙŠØ© */
const headGiftArea=document.getElementById('headGiftArea');
function showHeadGift(){
  const el=document.createElement('div');
  el.className='head-gift';
  el.textContent='ğŸŒ¹ğŸ’–';
  headGiftArea.appendChild(el);
  setTimeout(()=>el.remove(),900);
  incLikes(500+Math.floor(Math.random()*2000));
  viewers=Math.min(5_000_000_000,viewers+Math.floor(100+Math.random()*600));
  viewerCountEl.textContent=formatTikTokNumber(viewers);
}
setInterval(()=>{if(Math.random()<0.35)showHeadGift();},4200+Math.random()*5200);

/* Ø²Ø± ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª */
const toggleBtn=document.getElementById('toggleCommentsBtn');
toggleBtn.onclick=()=>{
  commentsOn=!commentsOn;
  if(commentsOn){
    toggleBtn.textContent='ğŸŸ¢ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø´ØºØ§Ù„Ø©';
    toggleBtn.classList.remove('off');
  }else{
    toggleBtn.textContent='ğŸ”´ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…ØªÙˆÙ‚ÙØ©';
    toggleBtn.classList.add('off');
  }
};
</script>
</body>
</html>
