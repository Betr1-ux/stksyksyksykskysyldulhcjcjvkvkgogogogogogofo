<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
<title>Ø¨Ø« Ù…Ø¨Ø§Ø´Ø± ØªÙŠÙƒ ØªÙˆÙƒ ÙˆÙ‡Ù…ÙŠ</title>
<style>
  :root{
    --bg:#000;
    --muted:rgba(255,255,255,0.9);
    --bubble:rgba(0,0,0,0.45);
    --accent:#ff3366;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;background:var(--bg);font-family:Arial,Helvetica,sans-serif;color:#fff;overflow:hidden}
  video#cam{position:fixed;inset:0;width:100%;height:100%;object-fit:cover;z-index:0;transform:scaleX(-1)}

  .overlay{position:fixed;inset:0;z-index:2;pointer-events:none}
  .pill{background:rgba(0,0,0,0.5);padding:6px 12px;border-radius:20px;font-weight:700;font-size:14px;backdrop-filter:blur(4px)}
  .top-left{position:absolute;top:10px;left:10px;display:flex;gap:8px;align-items:center}
  .top-right{position:absolute;top:10px;right:10px;display:flex;gap:8px;align-items:center}

  .right-column{position:absolute;right:10px;top:20%;display:flex;flex-direction:column;gap:12px;align-items:center}
  .like-box{width:56px;height:56px;border-radius:14px;background:rgba(0,0,0,0.45);display:flex;flex-direction:column;align-items:center;justify-content:center}
  .like-box .count{font-size:12px}

  .floating-heart{position:absolute;bottom:0;right:6px;font-size:20px;animation:rise 2600ms linear forwards}
  @keyframes rise{0%{transform:translateY(0) scale(1);opacity:1}100%{transform:translateY(-300px) scale(.6);opacity:0}}

  /* Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª ØªØ­Øª Ø§Ù„Ø´Ø§Ø´Ø© ÙÙ‚Ø· */
  .comments-container{
    position:absolute;
    bottom:4%;
    left:0;right:0;
    display:flex;
    justify-content:center;
    pointer-events:none;
    z-index:10;
  }
  .comments{
    width:94%;
    max-width:700px;
    display:flex;
    flex-direction:column;
    justify-content:flex-end;
    align-items:flex-start;
    gap:5px;
    max-height:22vh;
    overflow:hidden;
  }
  .comment{
    background:rgba(0,0,0,0.5);
    border-radius:999px;
    padding:6px 10px;
    font-size:15px;
    display:flex;
    align-items:center;
    gap:8px;
    opacity:0;
    animation:fadeIn 0.4s ease forwards;
  }
  @keyframes fadeIn{to{opacity:1}}
  .avatar{
    width:28px;height:28px;border-radius:50%;
    background:linear-gradient(120deg,#ffb6c1,#ff6699);
    display:flex;align-items:center;justify-content:center;
    font-size:13px;color:#111;font-weight:700;
  }
  .msg{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:250px;}

  /* Ø§Ù„ÙˆØ±Ø¯ */
  .head-gift{
    position:absolute;top:25%;left:50%;
    transform:translateX(-50%) scale(0.6);
    font-size:70px;opacity:0;
    animation:popGift 1.4s ease forwards;
    filter:drop-shadow(0 10px 25px rgba(0,0,0,0.5));
  }
  @keyframes popGift{
    0%{transform:translateX(-50%) scale(0.3);opacity:0}
    30%{transform:translateX(-50%) scale(1.1);opacity:1}
    100%{transform:translateX(-50%) scale(0.6);opacity:0}
  }

  #toggleComments{
    position:absolute;bottom:14px;left:50%;transform:translateX(-50%);
    z-index:999;
    padding:10px 18px;
    border:none;border-radius:999px;
    background:linear-gradient(90deg,#ff3366,#ff6699);
    color:#fff;font-weight:bold;font-size:15px;
    cursor:pointer;
  }
  #toggleComments.off{background:linear-gradient(90deg,#444,#666);}
</style>
</head>
<body>

<video id="cam" autoplay playsinline muted></video>

<div class="overlay">
  <div class="top-left">
    <div class="pill">Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±</div>
    <div class="pill">ğŸ‘ï¸ <span id="viewers">2.1k</span></div>
  </div>
  <div class="top-right">
    <div class="pill">â¤ï¸ <span id="likesTotal">50.1k</span></div>
  </div>

  <div class="right-column">
    <div class="like-box">
      <div>â¤ï¸</div>
      <div class="count" id="likes">50k</div>
    </div>
  </div>

  <!-- Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª -->
  <div class="comments-container">
    <div class="comments" id="comments"></div>
  </div>

  <div id="giftArea"></div>
</div>

<button id="toggleComments">ğŸŸ¢ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø´ØºØ§Ù„Ø©</button>

<script>
/* Ø±Ù‚Ù… Ù…Ø®ØªØµØ± */
function formatTikTokNumber(n){
  if(n>=1_000_000_000) return (n/1_000_000_000).toFixed(1).replace(/\.0$/,'')+'B';
  if(n>=1_000_000) return (n/1_000_000).toFixed(1).replace(/\.0$/,'')+'M';
  if(n>=1_000) return (n/1_000).toFixed(1).replace(/\.0$/,'')+'k';
  return String(n);
}

/* ÙƒØ§Ù…ÙŠØ±Ø§ */
const cam=document.getElementById('cam');
navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}})
.then(s=>cam.srcObject=s).catch(()=>{});

/* Ø¹Ø¯Ø§Ø¯Ø§Øª */
let viewers=2100;
let likes=50100;
const viewerEl=document.getElementById('viewers');
const likesEl=document.getElementById('likes');
const likesTotal=document.getElementById('likesTotal');

function updateViewers(){
  let delta=Math.floor((Math.random()-0.5)*1200);
  if(Math.random()<0.1) delta+=Math.floor(Math.random()*70000);
  viewers=Math.max(100,Math.min(5_000_000_000,viewers+delta));
  viewerEl.textContent=formatTikTokNumber(viewers);
}
setInterval(updateViewers,1500);

function incLikes(n=1){
  likes+=n;
  likesEl.textContent=formatTikTokNumber(likes);
  likesTotal.textContent=formatTikTokNumber(likes);
}
setInterval(()=>incLikes(100+Math.floor(Math.random()*600)),500);

/* ØªØ¹Ù„ÙŠÙ‚Ø§Øª */
const commentsEl=document.getElementById('comments');
const names=["Ø¹Ù„ÙŠ","Ø³Ø§Ø±Ø©","Ù…Ø­Ù…ÙˆØ¯","Ù†ÙˆØ±Ø§","Ù„ÙŠÙ„Ù‰","Ø£Ø­Ù…Ø¯","Ø¹Ù…Ø±","Ù…Ù†Ø©","Ø­Ø³Ù†","Ù‡Ø§Ø¬Ø±"];
const texts=["Ù…Ù†ÙˆØ± ÙŠØ§ Ù†Ø¬Ù… ğŸ”¥","Ø§Ø³ØªÙ…Ø± â¤ï¸","Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙƒ ğŸ˜","Ø¶Ø­ÙƒØªÙƒ Ø­Ù„ÙˆØ© ğŸ˜‚","ØªØ­ÙØ© ğŸ‘‘","Ø¹Ø§Ù…Ù„ Ø§ÙŠÙ‡","Ù†ÙˆØ±Øª","ÙÙŠÙ†Ùƒ ÙŠØ§ Ù†Ø¬Ù…","Ù‚Ù„Ø¨ â¤ï¸","Ø¨Ø« Ø¬Ù…ÙŠÙ„"];

let commentsOn=true;

function addComment(name,msg){
  if(!commentsOn) return;
  const c=document.createElement('div');
  c.className='comment';
  const av=document.createElement('div');av.className='avatar';av.textContent=name[0];
  const t=document.createElement('div');t.className='msg';t.textContent=`${name}: ${msg}`;
  c.append(av,t);
  commentsEl.appendChild(c);
  if(commentsEl.children.length>5) commentsEl.removeChild(commentsEl.firstChild);
  setTimeout(()=>{c.style.opacity='0';setTimeout(()=>c.remove(),500);},5000+Math.random()*2000);
}

setInterval(()=>{
  if(commentsOn && Math.random()<0.9){
    const n=names[Math.floor(Math.random()*names.length)];
    const m=texts[Math.floor(Math.random()*texts.length)];
    addComment(n,m);
  }
},1000+Math.random()*700);

/* Ù‡Ø¯ÙŠØ© */
const giftArea=document.getElementById('giftArea');
function showGift(){
  const g=document.createElement('div');
  g.className='head-gift';
  g.textContent='ğŸŒ¹ğŸ’–';
  giftArea.appendChild(g);
  setTimeout(()=>g.remove(),1400);
  incLikes(1000+Math.floor(Math.random()*4000));
  viewers+=Math.floor(Math.random()*800);
  viewerEl.textContent=formatTikTokNumber(viewers);
}
setInterval(()=>{if(Math.random()<0.3)showGift();},5000+Math.random()*4000);

/* ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª */
const toggleBtn=document.getElementById('toggleComments');
toggleBtn.onclick=()=>{
  commentsOn=!commentsOn;
  if(commentsOn){
    toggleBtn.textContent='ğŸŸ¢ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø´ØºØ§Ù„Ø©';
    toggleBtn.classList.remove('off');
  }else{
    toggleBtn.textContent='ğŸ”´ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…ØªÙˆÙ‚ÙØ©';
    toggleBtn.classList.add('off');
  }
};
</script>
</body>
  </html>
