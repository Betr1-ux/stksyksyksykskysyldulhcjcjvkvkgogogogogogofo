<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>بث مباشر تيك توك وهمي</title>
<style>
  :root{
    --bg:#000;
    --bubble:rgba(0,0,0,0.45);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;background:var(--bg);color:#fff;font-family:Arial,Helvetica,sans-serif;overflow:hidden}
  video#cam{position:fixed;inset:0;width:100%;height:100%;object-fit:cover;z-index:0;transform:none}

  .overlay{position:fixed;inset:0;z-index:2;pointer-events:none}
  .pill{background:rgba(0,0,0,0.5);padding:6px 12px;border-radius:20px;font-size:14px;font-weight:bold;backdrop-filter:blur(4px)}
  .top-left{position:absolute;top:10px;left:10px;display:flex;gap:8px;align-items:center}
  .right-column{position:absolute;right:10px;top:18%;display:flex;flex-direction:column;align-items:center;gap:12px}
  .like-box{width:56px;height:56px;border-radius:14px;background:rgba(0,0,0,0.45);display:flex;flex-direction:column;align-items:center;justify-content:center}
  .like-box .count{font-size:12px}

  /* التعليقات تحت فقط */
  .comments-bar{
    position:absolute;
    bottom:6%;
    left:0;right:0;
    display:flex;
    justify-content:center;
    pointer-events:none;
    z-index:10;
  }
  .comments-wrap{
    width:94%;
    max-width:720px;
    display:flex;
    flex-direction:column-reverse;
    align-items:flex-start;
    gap:8px;
  }
  .comment{
    pointer-events:auto;
    background:rgba(0,0,0,0.55);
    padding:8px 12px;
    border-radius:999px;
    display:flex;
    align-items:center;
    gap:10px;
    animation:slideUp .35s ease;
  }
  @keyframes slideUp{from{transform:translateY(18px);opacity:0}to{transform:translateY(0);opacity:1}}
  .avatar{
    width:36px;height:36px;border-radius:50%;
    display:flex;align-items:center;justify-content:center;
    background:linear-gradient(120deg,#ffd1dc,#ff9aa2);
    font-weight:bold;color:#111;font-size:14px;
  }
  .msg-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:70%}

  /* هدية */
  .head-gift{
    position:absolute;
    top:14%;
    left:50%;
    transform:translateX(-50%) translateY(-60%);
    font-size:70px;
    opacity:0;
    animation:popGift .9s ease forwards;
    filter:drop-shadow(0 12px 24px rgba(0,0,0,0.45));
  }
  @keyframes popGift{
    0%{transform:translateX(-50%) translateY(-60%) scale(.2);opacity:0}
    30%{transform:translateX(-50%) translateY(-66%) scale(1.12);opacity:1}
    100%{transform:translateX(-50%) translateY(-120%) scale(.6);opacity:0}
  }

  #toggleComments{
    position:absolute;
    bottom:14px;
    left:50%;
    transform:translateX(-50%);
    z-index:999;
    background:linear-gradient(90deg,#ff3366,#ff6699);
    border:none;
    border-radius:999px;
    color:#fff;
    font-weight:bold;
    padding:10px 18px;
    font-size:15px;
    cursor:pointer;
  }
  #toggleComments.off{background:linear-gradient(90deg,#444,#666);}
</style>
</head>
<body>

<video id="cam" autoplay playsinline muted></video>

<div class="overlay">
  <div class="top-left">
    <div class="pill">بث مباشر</div>
    <div class="pill">👁️ <span id="viewerCount">2.1k</span></div>
  </div>

  <div class="right-column">
    <div class="like-box">
      <div>❤️</div>
      <div class="count" id="likeCount">50k</div>
    </div>
  </div>

  <!-- التعليقات -->
  <div class="comments-bar">
    <div class="comments-wrap" id="commentsWrap"></div>
  </div>

  <div id="headGiftArea"></div>
</div>

<button id="toggleComments">🟢 التعليقات شغالة</button>

<script>
/* تنسيق أرقام مثل تيك توك */
function formatTikTokNumber(n){
  if(n>=1_000_000_000)return(n/1_000_000_000).toFixed(1).replace(/\.0$/,'')+'B';
  if(n>=1_000_000)return(n/1_000_000).toFixed(1).replace(/\.0$/,'')+'M';
  if(n>=1_000)return(n/1_000).toFixed(1).replace(/\.0$/,'')+'k';
  return String(n);
}

/* الكاميرا */
const video=document.getElementById('cam');
navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}})
.then(s=>video.srcObject=s).catch(()=>{});

/* المشاهدات */
let viewers=2100;
const viewerCountEl=document.getElementById('viewerCount');
function updateViewers(){
  let delta=Math.floor((Math.random()-0.5)*1800);
  if(Math.random()<0.08)delta+=Math.floor(500+Math.random()*80000);
  viewers=Math.max(200,Math.min(5_000_000_000,viewers+delta));
  viewerCountEl.textContent=formatTikTokNumber(viewers);
}
setInterval(updateViewers,1500);

/* لايكات */
let likes=50000;
const likeCountEl=document.getElementById('likeCount');
function incLikes(n=1){
  likes+=Math.round(n);
  likeCountEl.textContent=formatTikTokNumber(likes);
}
setInterval(()=>incLikes(100+Math.floor(Math.random()*800)),500);

/* التعليقات */
const commentsWrap=document.getElementById('commentsWrap');
const names=["علي","سارة","محمود","نورا","ليلى","أحمد","عمر","منة","حسن","هاجر"];
const msgs=["منور يا نجم 🔥","استمر ❤️","الله عليك 😍","ضحكتك حلوة 😂","تحفة 👑","عامل ايه","نورت","فينك يا نجم","قلب ❤️","بث جميل"];
let commentsOn=true;

function addComment(name,text){
  if(!commentsOn)return;
  const row=document.createElement('div');
  row.className='comment';
  const ava=document.createElement('div');ava.className='avatar';ava.textContent=name[0];
  const msg=document.createElement('div');msg.className='msg-text';msg.textContent=`${name}: ${text}`;
  row.appendChild(ava);row.appendChild(msg);
  commentsWrap.appendChild(row);
  if(commentsWrap.children.length>8)commentsWrap.removeChild(commentsWrap.firstChild);
  setTimeout(()=>{row.style.opacity='0';setTimeout(()=>row.remove(),400);},6000+Math.random()*4000);
}

setInterval(()=>{
  if(commentsOn && Math.random()<0.9){
    const n=names[Math.floor(Math.random()*names.length)];
    const m=msgs[Math.floor(Math.random()*msgs.length)];
    addComment(n,m);
  }
},1000+Math.random()*800);

/* هدية */
const headGiftArea=document.getElementById('headGiftArea');
function showHeadGift(){
  const el=document.createElement('div');
  el.className='head-gift';
  el.textContent='🌹💖';
  headGiftArea.appendChild(el);
  setTimeout(()=>el.remove(),900);
  incLikes(1000+Math.floor(Math.random()*5000));
  viewers+=Math.floor(10+Math.random()*160);
  viewerCountEl.textContent=formatTikTokNumber(viewers);
}
setInterval(()=>{if(Math.random()<0.3)showHeadGift();},4000+Math.random()*5000);

/* زر تشغيل/إيقاف التعليقات */
const toggleBtn=document.getElementById('toggleComments');
toggleBtn.onclick=()=>{
  commentsOn=!commentsOn;
  if(commentsOn){
    toggleBtn.textContent='🟢 التعليقات شغالة';
    toggleBtn.classList.remove('off');
  }else{
    toggleBtn.textContent='🔴 التعليقات متوقفة';
    toggleBtn.classList.add('off');
  }
};
</script>
</body>
      </html>
